<scroll-view class="ui-page song-page" scroll-y="true">
  <view class="ui-card song-hero">
    <view>
      <text class="ui-title">点歌台</text>
    </view>
    <button class="song-hero__btn" bindtap="goToMyRequests">
      <image class="song-hero__icon" src="/assets/imgs/StreamlineSharpSongRecommendation.png"></image>
      <text class="song-hero_text">我的点歌</text>
    </button>
  </view>

  <view class="ui-card ui-card--quiet song-search">
    <view class="song-search__controls">
      <input
        class="song-search__input"
        placeholder="搜索歌曲或歌手"
        bindinput="onSearchInput"
        value="{{searchKeyword}}" />
      <button class="song-search__btn" bindtap="onSearch" disabled="{{!searchKeyword}}">搜索</button>
    </view>
    <text class="song-search__hint">支持中文与英文关键字，尝试输入歌名或歌手名</text>
  </view>

  <block wx:if="{{results.length > 0}}">
    <view class="song-results">
      <view wx:for="{{results}}" wx:key="id" class="song-card ui-card ui-card--quiet">
        <view class="song-card__info">
          <text class="song-card__title">{{item.name}}</text>
          <text class="song-card__artist">{{item.artists}}</text>
        </view>
        <button
          class="song-card__action"
          data-id="{{item.id}}"
          data-name="{{item.name}}"
          bindtap="onRequestSong"
          loading="{{requestingId === item.id}}">
          {{requestingId === item.id ? '点歌中...' : '点歌'}}
        </button>
      </view>
    </view>
  </block>

  <view wx:if="{{searched && results.length === 0}}" class="ui-card song-placeholder">
    <image class="song-placeholder__icon" src="/assets/imgs/empty-search.png"></image>
    <text class="song-placeholder__title">没有找到相关歌曲</text>
    <text class="song-placeholder__desc">换个关键词或尝试输入歌手名字</text>
  </view>

  <view wx:if="{{!searched && results.length === 0}}" class="ui-card song-placeholder">
    <image class="song-placeholder__icon" src="/assets/imgs/MaterialSymbolsSearchRounded.png"></image>
    <text class="song-placeholder__title">搜索你喜欢的歌曲</text>
    <text class="song-placeholder__desc">输入歌名或歌手名开始点歌之旅</text>
  </view>
</scroll-view>